{"version":3,"file":"js/347.158d0da9.js","mappings":"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","sources":["webpack://week6-homework/./src/views/LoginView.vue","webpack://week6-homework/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row d-flex justify-content-center\">\n      <h1 class=\"h3 mb-3 font-weight-normal\">\n        請先登入\n      </h1>\n      <div class=\"col-8\">\n        <form id=\"form\" class=\"form-signin\" @submit.prevent=\"login\">\n          <div class=\"form-floating mb-3\">\n            <input type=\"email\" class=\"form-control\" id=\"username\"\n              placeholder=\"name@example.com\" v-model=\"userInfo.username\"\n              :disabled=\"isLoading\" required autofocus>\n            <label for=\"username\">Email address</label>\n          </div>\n          <div class=\"form-floating\">\n            <input type=\"password\" class=\"form-control\" id=\"password\"\n              placeholder=\"Password\" v-model=\"userInfo.password\" :disabled=\"isLoading\" required>\n            <label for=\"password\">Password</label>\n          </div>\n          <button class=\"btn btn-lg btn-primary w-100 mt-3\" type=\"submit\" :disabled=\"isLoading\">\n            登入\n            <div class=\"spinner-border ms-2\" role=\"status\" v-if=\"isLoading\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </button>\n\n        </form>\n      </div>\n    </div>\n    <div id=\"loginResult\"></div>\n    <p class=\"mt-5 mb-3 text-muted\">\n      &copy; 2022~∞ - 六角學院\n    </p>\n  </div>\n</template>\n\n<script>\nimport bootstrap from 'bootstrap';\n\nexport default {\n  data() {\n    return {\n      userInfo: {\n        username: '',\n        password: '',\n      },\n      isLoading: false,\n    };\n  },\n  methods: {\n    login() {\n      const usernameRequir = (this.userInfo.username === '');\n      const passwordRequir = (this.userInfo.password === '');\n      if (usernameRequir || passwordRequir) {\n        this.alert('需填入帳號和密碼資料，登入失敗', 'danger');\n        return;\n      }\n\n      this.isLoading = true;\n\n      const reqData = {\n        username: this.userInfo.username,\n        password: this.userInfo.password,\n      };\n      this.$http.post(`${process.env.VUE_APP_API}/admin/signin`, reqData)\n        .then((res) => {\n          if (res.status === 200) {\n            const { expired, token } = res.data;\n            // 寫入 cookie token\n            // expires 設置有效時間\n            document.cookie = `hexToken=${token};expires=${new Date(expired)}; path=/`;\n            this.$router.push('/admin/products');\n          } else {\n            this.alert('帳號密碼錯誤，登入失敗', 'danger');\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n          this.alert('帳號密碼錯誤，登入失敗', 'danger');\n        })\n        .finally(() => {\n          this.isLoading = false;\n        });\n    },\n    alert(message, type) {\n      const alertPlaceholder = document.getElementById('loginResult');\n      const wrapper = document.createElement('div');\n      wrapper.innerHTML = `\n        <div class=\"alert alert-${type} alert-dismissible\" role=\"alert\"> \n          ${message} <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\n        </div>\n      `;\n      alertPlaceholder.append(wrapper);\n      setTimeout(() => {\n        const alertNode = document.querySelector('.alert');\n        const bsAlert = new bootstrap.Alert(alertNode);\n        if (alertNode && bsAlert) {\n          bsAlert.close();\n        }\n      }, 3000);\n    },\n  },\n};\n</script>\n","import { render } from \"./LoginView.vue?vue&type=template&id=18a0c1fe\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\temp\\\\week6-homework\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","role","_hoisted_14","id","_createElementBlock","_hoisted_3","onSubmit","$options","type","placeholder","$data","username","$event","disabled","required","autofocus","_hoisted_7","password","_hoisted_10","_hoisted_15","_hoisted_16","_hoisted_17","data","userInfo","isLoading","methods","login","usernameRequir","this","passwordRequir","alert","reqData","$http","post","then","res","status","expired","token","document","cookie","Date","$router","push","catch","err","console","error","finally","message","alertPlaceholder","getElementById","wrapper","createElement","innerHTML","append","setTimeout","alertNode","querySelector","bsAlert","bootstrap","close","__exports__","render"],"sourceRoot":""}