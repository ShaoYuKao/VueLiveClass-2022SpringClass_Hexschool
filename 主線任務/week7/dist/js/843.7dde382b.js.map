{"version":3,"file":"js/843.7dde382b.js","mappings":"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","sources":["webpack://week7-homework/./src/views/LoginView.vue","webpack://week7-homework/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\n  <div class=\"container mt-3\">\n    <div class=\"row d-flex justify-content-center\">\n      <h1 class=\"h3 mb-3 font-weight-normal text-center\">請先登入</h1>\n      <div class=\"col-8\">\n        <form id=\"form\" class=\"form-signin\" @submit.prevent=\"login\">\n          <div class=\"form-floating mb-3\">\n            <input\n              type=\"email\"\n              class=\"form-control\"\n              id=\"username\"\n              placeholder=\"name@example.com\"\n              v-model=\"userInfo.username\"\n              :disabled=\"isLoading\"\n              required\n              autofocus\n            />\n            <label for=\"username\">Email address</label>\n          </div>\n          <div class=\"form-floating\">\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              id=\"password\"\n              placeholder=\"Password\"\n              v-model=\"userInfo.password\"\n              :disabled=\"isLoading\"\n              required\n            />\n            <label for=\"password\">Password</label>\n          </div>\n          <button\n            class=\"btn btn-lg btn-primary w-100 mt-3\"\n            type=\"submit\"\n            :disabled=\"isLoading\"\n          >\n            登入\n            <div class=\"spinner-border ms-2\" role=\"status\" v-if=\"isLoading\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </button>\n        </form>\n      </div>\n    </div>\n    <div id=\"loginResult\"></div>\n    <p class=\"mt-5 mb-3 text-center\">&copy; 2022~∞ - 六角學院</p>\n  </div>\n</template>\n\n<script>\nimport bootstrap from 'bootstrap';\n\nexport default {\n  data() {\n    return {\n      userInfo: {\n        username: '',\n        password: '',\n      },\n      isLoading: false,\n    };\n  },\n  methods: {\n    login() {\n      const usernameRequir = this.userInfo.username === '';\n      const passwordRequir = this.userInfo.password === '';\n      if (usernameRequir || passwordRequir) {\n        this.alert('需填入帳號和密碼資料，登入失敗', 'danger');\n        return;\n      }\n\n      this.isLoading = true;\n\n      const reqData = {\n        username: this.userInfo.username,\n        password: this.userInfo.password,\n      };\n      this.$http\n        .post(`${process.env.VUE_APP_API}/admin/signin`, reqData)\n        .then((res) => {\n          if (res.status === 200) {\n            const { expired, token } = res.data;\n            // 寫入 cookie token\n            // expires 設置有效時間\n            document.cookie = `hexToken=${token};expires=${new Date(expired)}; path=/`;\n            this.$router.push('/admin/products');\n          } else {\n            this.alert('帳號密碼錯誤，登入失敗', 'danger');\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n          this.alert('帳號密碼錯誤，登入失敗', 'danger');\n        })\n        .finally(() => {\n          this.isLoading = false;\n        });\n    },\n    alert(message, type) {\n      const alertPlaceholder = document.getElementById('loginResult');\n      const wrapper = document.createElement('div');\n      wrapper.innerHTML = `\n        <div class=\"alert alert-${type} alert-dismissible\" role=\"alert\"> \n          ${message} <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\n        </div>\n      `;\n      alertPlaceholder.append(wrapper);\n      setTimeout(() => {\n        const alertNode = document.querySelector('.alert');\n        const bsAlert = new bootstrap.Alert(alertNode);\n        if (alertNode && bsAlert) {\n          bsAlert.close();\n        }\n      }, 3000);\n    },\n  },\n};\n</script>\n","import { render } from \"./LoginView.vue?vue&type=template&id=6125d2fa\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\temp\\\\week7-homework\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","role","_hoisted_14","id","_createElementBlock","_hoisted_3","onSubmit","$options","type","placeholder","$data","username","$event","disabled","required","autofocus","_hoisted_7","password","_hoisted_10","_hoisted_15","_hoisted_16","_hoisted_17","data","userInfo","isLoading","methods","login","usernameRequir","this","passwordRequir","alert","reqData","$http","post","then","res","status","expired","token","document","cookie","Date","$router","push","catch","err","console","error","finally","message","alertPlaceholder","getElementById","wrapper","createElement","innerHTML","append","setTimeout","alertNode","querySelector","bsAlert","bootstrap","close","__exports__","render"],"sourceRoot":""}